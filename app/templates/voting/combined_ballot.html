{% extends 'base.html' %}
{% from '_macros.html' import breadcrumbs %}
{% block content %}
{{ breadcrumbs([('Ballot', url_for('voting.ballot_home')), (meeting.title, None), ('Combined', None)]) }}
<h2 class="font-bold text-bp-blue mb-4">Combined Ballot</h2>
{% set current_stage = 1 %}
{% include '_stepper.html' %}
{% if proxy_for %}
<div class="bp-alert-warning text-center mb-4">
  Casting votes as proxy for {{ proxy_for.name }}.
</div>
{% endif %}
<form id="vote-form" method="post" class="bp-form bp-card space-y-6 pb-20">
  {{ form.hidden_tag() }}
  {% for motion, ams in motions %}
    <div class="bp-card bp-glow mb-4">{{ motion.text_md|markdown_to_html|safe }}</div>
    {% for amend in ams %}
      <div class="mb-4">
        <div class="font-semibold mb-2">{{ amend.text_md|markdown_to_html|safe }}</div>
        <div class="space-x-4">
          {% for sub in form['amend_' ~ amend.id] %}
            <label class="inline-flex items-center mr-4">{{ sub() }}<span>{{ sub.label.text }}</span></label>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
    <div class="space-x-4 mb-4">
      {% for sub in form['motion_' ~ motion.id] %}
        <label class="inline-flex items-center mr-4">{{ sub() }}<span>{{ sub.label.text }}</span></label>
      {% endfor %}
    </div>
  {% endfor %}
  {% include 'voting/_sticky_footer.html' %}
</form>
<script src="{{ url_for('static', filename='js/voting_footer.js') }}"></script>
{% endblock %}
