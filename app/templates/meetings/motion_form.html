{% extends 'base.html' %}
{% from '_macros.html' import breadcrumbs %}
{% block content %}
{% set label = 'Edit Motion' if motion else 'Create Motion' %}
{{ breadcrumbs([('Dashboard', url_for('admin.dashboard')), ('Meetings', url_for('meetings.list_meetings')), (label, None)]) }}
<h1 class="font-bold text-bp-blue mb-4">{{ 'Edit' if motion else 'Create' }} Motion</h1>
<form method="post" class="bp-form bp-card space-y-4">
  {{ form.hidden_tag() }}
  <div>
    {{ form.title.label(class_='block font-semibold') }}
    {{ form.title(class_='border p-3 rounded w-full') }}
  </div>
  <div>
    {{ form.text_md.label(class_='block font-semibold') }}
    {{ form.text_md(class_='border p-3 rounded w-full') }}
  </div>
  <div>
    {{ form.category.label(class_='block font-semibold') }}
    {{ form.category(class_='border p-3 rounded w-full') }}
  </div>
  <div>
    {{ form.threshold.label(class_='block font-semibold') }}
    {{ form.threshold(class_='border p-3 rounded w-full') }}
  </div>
  <div>
    {{ form.options.label(class_='block font-semibold') }}
    {{ form.options(class_='border p-3 rounded w-full') }}
  </div>
  <div class="flex items-center space-x-2">
    {{ form.allow_clerical() }}
    {{ form.allow_clerical.label(class_='font-semibold') }}
    <a href="#" data-modal-target="clerical-modal" class="text-sm underline">View text</a>
  </div>
  <div class="flex items-center space-x-2">
    {{ form.allow_move() }}
    {{ form.allow_move.label(class_='font-semibold') }}
    <a href="#" data-modal-target="move-modal" class="text-sm underline">View text</a>
  </div>
  <button type="submit" class="bp-btn-primary">Save</button>
</form>

<dialog id="clerical-modal" class="bp-card w-full max-w-md">
  <p class="mb-4">{{ clerical_text|markdown_to_html|safe }}</p>
  <button class="bp-btn-secondary" data-close-modal>Close</button>
</dialog>
<dialog id="move-modal" class="bp-card w-full max-w-md">
  <p class="mb-4">{{ move_text|markdown_to_html|safe }}</p>
  <button class="bp-btn-secondary" data-close-modal>Close</button>
</dialog>
{% endblock %}
