{% extends 'base.html' %}
{% from '_macros.html' import breadcrumbs %}
{% block content %}
{{ breadcrumbs([('Dashboard', url_for('admin.dashboard')), ('Objections', url_for('admin.list_objections'))]) }}
<h2 class="font-bold text-bp-blue mb-4">Amendment Objections</h2>
<table class="bp-table w-full">
  <thead>
    <tr><th>Amendment</th><th>Member</th><th>Date</th><th></th></tr>
  </thead>
  <tbody>
  {% for obj, amend, member in objections %}
    <tr class="border-t">
      <td class="p-2">{{ amend.text_md[:50] }}</td>
      <td class="p-2">{{ member.name }}</td>
      <td class="p-2">{{ obj.created_at.strftime('%Y-%m-%d') }}</td>
      <td class="p-2">
        <form method="post" action="{{ url_for('admin.reinstate_amendment', amendment_id=amend.id) }}">
          {{ csrf_token() }}
          <button class="bp-btn-secondary">Reinstate</button>
        </form>
      </td>
    </tr>
  {% else %}
    <tr><td colspan="4" class="p-2">No objections.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
